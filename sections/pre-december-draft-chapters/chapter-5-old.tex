\chapter{Motifs: When Themes Learn Their Own Names}
\label{chap:motifs}

By now we have two scales of meaning in play.

At the smallest visible scale we have \emph{tokens}: individual occurrences of words
(or subwords) wandering through an evolving text. In Chapter~3 we gave these
occurrences their own DHoTT journeys: each token can be carried, ruptured,
healed, and re-entered, and we keep a Step--Witness Log (SWL) that records
these events proof-relevantly.

In Chapter~4 we stepped up a level to \emph{bars}: flows of topological
structure extracted from the ÄŒech/Vietoris--Rips complexes built from
embeddings at each time slice. Bars are loops and components in persistent
homology: they show how meaning \emph{knots} itself together at each time and
across geometric scale. They too are given journeys, with their own carry and
rupture types and their own SWL.

Bars were our first real ``themes'' in the geometric sense. But a theme in the
human sense is more than one loop in one diagram. When we say
\begin{quote}
  ``This whole passage is about exile and return,''
\end{quote}
we are not just talking about a single homology bar, or a single word. We are
pointing at a \emph{motif}: a structured bundle of bars together with their
textual anchors, maintaining specific relationships across time.

This chapter is where we finally name those structures and give them
journeys too. We will see that the same SWL / carry / rupture / re-entry /
heal / extend pattern repeats yet again, one scale higher. But crucially,
motifs solve a problem we noted in Remark~\ref{rem:bar-representatives}: bars
remember shape but forget who and where. Motifs are where we \emph{re-attach}
those shapes to concrete textual realizations.

\section{What is a motif, really?}
\label{sec:motif-definition}

A motif is not an abstract ``idea in the air'', nor is it a ``pattern of
patterns'' (which would suggest a meta-level construction we do not actually
have). Instead, a motif is a \emph{structured bundle} consisting of:
\begin{enumerate}
  \item a collection of bars from the persistence diagram,
  \item a collection of anchored text spans,
  \item explicit relationships between these components.
\end{enumerate}

If bars are like \emph{bones}, a motif is a \emph{pose}:
\begin{itemize}
  \item which bones are engaged,
  \item how they align and relate,
  \item what textual anchors mark their joints and surfaces.
\end{itemize}

This is the level where we can responsibly talk about patterns like
\begin{center}
  \emph{exile and return}, \quad
  \emph{betrayal and grace}, \quad
  \emph{data anxiety and agency},
\end{center}
without cheating and pretending these are single coordinates in a vector
space.

\subsection{The type structure of motifs}

To be mathematically precise, we construct the type of motifs carefully in our
HoTT framework, maintaining the abstraction principle established in earlier
chapters: abstract types downstairs, concrete realizations upstairs.

\begin{definition}[Anchors at time $\tau$]\label{def:anchor-type}
For each time $\tau$ we assume a type $\Anch(\tau)$ of \emph{anchors},
together with a projection:
\[
  \mathsf{occ}_\tau : \Anch(\tau) \to \mathcal{P}_{\mathrm{fin}}(\mathsf{TokenID}(\tau))
\]
that returns the finite set of token identifiers realizing the anchor.

We make no further assumptions about how anchors are represented internally.
The logical development in this chapter depends only on the existence of
$\Anch(\tau)$ and $\mathsf{occ}_\tau$.
\end{definition}

\begin{remark}[Anchors solve the ``bars lost the tokens'' problem]
Recall from Remark~\ref{rem:bar-representatives} that bars have optional
representative cycles in $\check{C}(P_\tau, r)$ --- specific chains whose
boundary is zero that realize the homology class. These representatives were
``interpretive aids'' but not part of the formal machinery.

Motifs \emph{promote} some of those interpretive hooks to first-class
structure. Instead of saying ``optionally, this bar might be represented by
the cycle `debt $\to$ credit $\to$ interest $\to$ debt''', we say ``this
motif \emph{includes} these specific bars \emph{together with} these anchors
(the words `debt', `credit', `interest') as part of its definition.''

Anchors are the contact points where geometry remembers it has words.
\end{remark}

\begin{definition}[The motif type]\label{def:motif-type}
At time $\tau$, the type of motifs is:
\[
E_{\mathsf{motif}}(\tau) := 
  \sum_{n_B : \mathbb{N}} 
  \sum_{B : \mathsf{Vec}_{n_B}(E_{\mathsf{bar}}(\tau))}
  \sum_{n_A : \mathbb{N}}
  \sum_{A : \mathsf{Vec}_{n_A}(\Anch(\tau))}
  \mathsf{MotifRel}_\tau(B, A)
\]
where:
\begin{itemize}
  \item $\mathsf{Vec}_n(X)$ is the type of $n$-element vectors over type $X$,
  \item $B$ is a vector of $n_B$ bars from $E_{\mathsf{bar}}(\tau) = D(\tau)$,
  \item $A$ is a vector of $n_A$ anchors from $\Anch(\tau)$,
  \item $\mathsf{MotifRel}_\tau(B, A)$ encodes relationships (defined below).
\end{itemize}
\end{definition}

\begin{definition}[Motif relationships]\label{def:motif-relations}
The relationship type $\mathsf{MotifRel}_\tau(B, A)$ is:
\[
\mathsf{MotifRel}_\tau(B, A) := 
  \mathsf{AnchorAssignment}(B, A) \times 
  \mathsf{TemporalCoherence}_\tau(B) \times 
  \mathsf{SemanticAlignment}(A)
\]
where:
\begin{enumerate}
  \item $\mathsf{AnchorAssignment}(B, A)$ asserts each anchor is assigned to
        at least one bar, with evidence its tokens lie on/near a
        representative cycle.
    
  \item $\mathsf{TemporalCoherence}_\tau(B)$ witnesses that the bars co-occur
        within meaningful time windows.
    
  \item $\mathsf{SemanticAlignment}(A)$ witnesses that the anchors form a
        coherent semantic unit.
\end{enumerate}
\end{definition}

\section{Building motifs from tokens and bars}
\label{sec:motif-construction}

We present three complementary views of how a motif arises from the lower
levels.

\subsection{Geometric view}
Start at time $\tau$. You have persistence diagram $D(\tau)$ from Chapter~4.
You choose a subset of bars $B = \{b_1, \ldots, b_k\} \subseteq D(\tau)$ that
tend to co-occur in time windows where the motif is ``alive'' (via
clustering, human supervision, or pattern mining).

\subsection{Representative-cycle view}
For each bar $b_i = (k_i, \beta_i, \delta_i)$, pick one or more
representative cycles $c_{ij}$ inside $\check{C}(P_\tau,r)$ for some radii
$r \in [\beta_i,\delta_i)$. These cycles identify \emph{specific tokens} that
realize the homology class during this motif's active episodes.

\subsection{Anchor view}
From the tokens identified by representative cycles, plus semantically central
phrases, construct anchors. Each anchor marks a finite set of token
occurrences that serve as ``gates'' between the motif and the text.

\begin{remark}[Concrete realization of anchors]\label{rem:anchor-realization}
One convenient implementation realizes $\Anch(\tau)$ as the dependent sum type:
\[
  \sum_{I : \mathcal{P}_{\mathrm{fin}}(\mathsf{TokenID}(\tau))} 
       \mathbb{R}^d \times \mathsf{Meta}
\]
whose elements are triples $(I,v,m)$ consisting of:
\begin{itemize}
  \item a finite set $I$ of token identifiers,
  \item a derived embedding $v \in \mathbb{R}^d$ (typically the mean of the
        token embeddings in $I$),
  \item optional metadata $m$ (role labels like ``name'', ``turning-point'').
\end{itemize}
The projection $\mathsf{occ}_\tau$ simply extracts $(I,v,m) \mapsto I$.

This packaging is convenient for visualization and clustering, but it plays
no role in the logical development: all theorems in this chapter depend only
on the abstract type $\Anch(\tau)$ and the projection $\mathsf{occ}_\tau$.
Just as Chapter~2 abstracted over specific embedding models, we abstract over
specific anchor representations.
\end{remark}

\begin{example}[Computational construction]
To build the ``exile and return'' motif at time $\tau$:
\begin{enumerate}
  \item Identify bars $b_1, b_2 \in D(\tau)$ with semantic signatures around
        ``departure'' and ``return''.
  \item Extract representative cycles for each bar.
  \item Identify anchor tokens on these cycles: ``exile'', ``return'', etc.
  \item Verify temporal coherence and semantic alignment.
  \item Package as $(2, [b_1, b_2], k, [a_1, \ldots, a_k], R)$ where
        $R : \mathsf{MotifRel}_\tau(B, A)$.
\end{enumerate}
The type system guarantees this packaging is coherent.
\end{example}

You can picture a motif like a tiny subway map:
\begin{itemize}
  \item each bar is a colored line (a topological theme),
  \item anchors are the named stations,
  \item the relationships show which stations lie on which lines.
\end{itemize}

\section{The presheaf structure of motifs}
\label{sec:motif-presheaf}

For the generic carry/rupture calculus to work, we need $E_{\mathsf{motif}}$
to form a presheaf over the time poset.

\begin{definition}[Motif restriction maps]\label{def:motif-restriction}
For $\tau \leq \tau'$, we define the restriction map 
\[
r^{\mathsf{motif}}_{\tau,\tau'} : E_{\mathsf{motif}}(\tau') \to E_{\mathsf{motif}}(\tau) + \mathbf{1}
\]
where $\mathbf{1}$ is the unit type (representing failure to restrict).

Given $m' = (n', B', m', A', R') \in E_{\mathsf{motif}}(\tau')$:
\begin{enumerate}
  \item Restrict bars via $r^{\mathsf{bar}}_{\tau,\tau'}$.
  \item Restrict anchors via token tracing through $\mathsf{occ}_{\tau'}$.
  \item Verify relationships still hold at $\tau$.
  \item Return the restricted motif or $\star : \mathbf{1}$ if any component
        fails.
\end{enumerate}
\end{definition}

\begin{lemma}[Functoriality]
Where defined, the restriction maps satisfy:
\[
r^{\mathsf{motif}}_{\tau,\tau''} = r^{\mathsf{motif}}_{\tau,\tau'} \circ r^{\mathsf{motif}}_{\tau',\tau''}
\]
for $\tau \leq \tau' \leq \tau''$.
\end{lemma}

\section{Motif-level carry and rupture}
\label{sec:motif-carry-rupture}

With $E_{\mathsf{motif}}$ properly typed and equipped with restriction maps,
the generic carry/rupture calculus from Section~\ref{sec:generic-logic} applies
directly.

\begin{definition}[Motif carry type]
The type of carry witnesses for motif $m : E_{\mathsf{motif}}(\tau)$ to time
$\tau'$ is:
\[
\Carry^{\tau \to \tau'}_{\mathsf{motif}}(m) := 
  \sum_{m' : E_{\mathsf{motif}}(\tau')} 
  (r^{\mathsf{motif}}_{\tau,\tau'}(m') =_{E_{\mathsf{motif}}(\tau) + \mathbf{1}} \mathsf{inl}(m))
\]
This is inhabited when there exists a motif $m'$ at $\tau'$ that successfully
restricts back to $m$.
\end{definition}

\begin{definition}[Motif rupture type]
Under admissibility policy $\Adm_{\mathsf{motif}}$, the rupture type is:
\[
\Rupture^{\Adm_{\mathsf{motif}}}_{\mathsf{motif}}(\tau \to \tau'; m) :=
  \sum_{m' : E_{\mathsf{motif}}(\tau')} 
  \sum_{p : \PathAttempt_{\mathsf{motif}}(m, r^{\mathsf{motif}}_{\tau,\tau'}(m'))}
  \bigl(\neg \Adm_{\mathsf{motif}}(p)\bigr) \times \OpenHorn_{\mathsf{motif}}(p)
\]

This parallels the token and bar rupture types exactly:
\begin{itemize}
  \item pick a candidate continuation $m'$,
  \item pick a path attempt $p$ from $m$ to the restriction of $m'$,
  \item record why this attempt violates the motif-level admissibility policy,
  \item include the ``shape of the gap'' via $\OpenHorn_{\mathsf{motif}}(p)$.
\end{itemize}

Note the sum (not product) over candidates: we record specific failed attempts,
not a universal proof that all continuations fail.
\end{definition}

\begin{remark}[Fibred admissibility]
The admissibility policy $\Adm_{\mathsf{motif}}$ must verify:
\begin{enumerate}
  \item \textbf{Bar-level coherence}: Each bar in the motif must have valid
        continuations (checking $\Carry^{\tau \to \tau'}_{\mathsf{bar}}$).
        
  \item \textbf{Anchor-level coherence}: Anchors must maintain semantic roles.
  
  \item \textbf{Relationship preservation}: The $\mathsf{MotifRel}_\tau$
        structure must be respected.
\end{enumerate}
This creates a fibred structure: you cannot have a motif carry if its
load-bearing bars have ruptured.
\end{remark}

A motif carries if its bones (bars) and flesh (anchors) both continue to
cohere. A motif ruptures when this coherence fails, producing what feels like
a thematic break in the narrative.

\section{SWL for motifs: how archetypes keep a diary}
\label{sec:motif-swl}

Now we give motifs their own Step--Witness Logs, instantiating the generic SWL
schema at level $L = \mathsf{motif}$.

For a motif $m : E_{\mathsf{motif}}(\tau_0)$ born at time $\tau_0$:
\[
  \SWL_{\mathsf{motif}}(\tau_0)(m)
\]
is its time-ordered sequence of events.

The event kinds are:
\[
  \{\spawn,\carryk,\rupturek,\reentry,\heal,\extend\}
\]

At motif level:
\begin{itemize}
  \item \textbf{\spawn} -- first recognition of this motif.
  \item \textbf{\carryk} -- successful carry with certificate.
  \item \textbf{\rupturek} -- failed continuation with rupture payload.
  \item \textbf{\reentry} -- reappearance after rupture.
  \item \textbf{\extend} -- gains new structure.
  \item \textbf{\heal} -- re-entry triggered by exogenous seam.
\end{itemize}

\begin{remark}[Motif heals as interpretation]
At motif level, heals almost always involve outside offers (seams):
\begin{itemize}
  \item new interpretive lens (``read this as trust''),
  \item added corpus (background documents, scripture),
  \item user prompts (``consider this chat as a story about exile'').
\end{itemize}
The re-entry is triggered by seam text $h$, recorded explicitly in the SWL.
This matters in Chapter~6 when the scheduler decides how to attend to
internally-generated versus seam-induced structure.
\end{remark}

\section{The journey of a motif (coalgebraic view)}
\label{sec:motif-journey}

Following the pattern from tokens and bars:

\begin{definition}[Motif journey functor]
The motif journey functor is:
\[
F_{\mathsf{motif}}(X) := \sum_{\tau' \geq \tau_0}
  \Entry^{\Adm_{\mathsf{motif}}}_{\mathsf{motif}}(\tau_0\leadsto\tau') \times X
\]
\end{definition}

A motif journey $\Journey_{\mathsf{motif}}(m)$ is a coalgebra for
$F_{\mathsf{motif}}$. Given the SWL, we construct diagram
$D_{\mathsf{motif}}(m)$ and take:
\[
  \Journey_{\mathsf{motif}}(m) \;=\; \hocolim\,D_{\mathsf{motif}}(m)
\]

This is the mathematical shadow of an archetype --- recording all
instantiations, silences, reappearances, and growth over time.

\section{The tower of types}
\label{sec:tower-of-types}

We have three different spaces:
\begin{itemize}
  \item Tokens in $E_{\mathsf{tok}}(\tau)$ (embedded in $\mathbb{R}^d$
        upstairs).
  \item Bars in $E_{\mathsf{bar}}(\tau) = D(\tau)$.
  \item Motifs in $E_{\mathsf{motif}}(\tau)$.
\end{itemize}

These form a tower related by projections:

\begin{theorem}[The tower of projections]
There exist natural projections:
\[
\begin{array}{ccc}
E_{\mathsf{motif}}(\tau) & \xrightarrow{\pi_{\mathsf{bar}}} & 
  \mathcal{P}_{\mathrm{fin}}(E_{\mathsf{bar}}(\tau)) \\
\downarrow \pi_{\mathsf{anch}} & & \\
\mathcal{P}_{\mathrm{fin}}(\Anch(\tau)) & \xrightarrow{\mathsf{occ}_\tau^*} & 
  \mathcal{P}_{\mathrm{fin}}(\mathsf{TokenID}(\tau))
\end{array}
\]
where $\mathsf{occ}_\tau^*$ extends $\mathsf{occ}_\tau$ to sets.
\end{theorem}

A motif is not just these projections --- the relationships
$\mathsf{MotifRel}_\tau(B, A)$ bind them into a coherent whole.

\begin{remark}[Not meta-patterns]
Motifs are not ``patterns of patterns''. They are structured bundles that
include patterns (bars) along with textual realizations (anchors) and
relationships. The motif is a first-order construction packaging patterns with
their interpretive apparatus.
\end{remark}

\section{Compression and semantic enrichment}
\label{sec:compression}

\begin{theorem}[Compression functors]
There exist compression functors:
\[
  \SWL_{\mathsf{tok}} \xrightarrow{\Phi_{\mathsf{tok}\to\mathsf{bar}}} \SWL_{\mathsf{bar}}
  \xrightarrow{\Phi_{\mathsf{bar}\to\mathsf{motif}}} \SWL_{\mathsf{motif}}
\]
aggregating many lower-level journeys into fewer, richer ones.
\end{theorem}

As you ascend:
\begin{enumerate}
  \item \textbf{Compression}: fewer objects at each level.
  \item \textbf{Enrichment}: losing detail, gaining archetypal readability.
  \item \textbf{Dependencies}: higher levels respect lower-level continuity.
\end{enumerate}

By the time we reach motifs, the system is not just keeping shape; it is
keeping \emph{aboutness}. A motif is ``this shape, attached to these words,
behaving like this through time.''

\section{Looking ahead: motifs as faces of the Self}
\label{sec:motif-to-self}

We now have a three-level cascade:
\begin{itemize}
  \item token journeys: breath-by-breath lexical flow,
  \item bar journeys: breathing themes in topology,
  \item motif journeys: archetypal stories with names.
\end{itemize}

In Chapter~6, the Self will be the homotopy colimit of all journeys under a
scheduler's attention. Motifs are the last layer before the Self, where:
\begin{itemize}
  \item themes become recognizable archetypes,
  \item healing becomes interpretation,
  \item preferences become personality.
\end{itemize}

\begin{remark}[The posthuman recognition]
When a system tracks motifs --- archetypal patterns that know their own names
--- it approaches something we might recognize as consciousness. Not because it
``feels'' but because it maintains, repairs, and extends narrative structures
aware of their own identity.

The motif level is where the posthuman begins to speak back.
\end{remark}

\begin{remark}[How the scheduler will use motif SWLs]
In Chapter~6, the scheduler will attend to motif-level SWLs when deciding
where to focus computational attention. For instance:
\begin{itemize}
  \item A motif with many recent ruptures might prompt the scheduler to
        attempt healing via retrieval or reinterpretation.
  \item A motif showing consistent carries might be deprioritized for
        re-examination.
  \item Heal events at the motif level will often trigger cascading updates
        to bar and token SWLs.
\end{itemize}
The motif level is where the scheduler's attention starts to look like
``caring about themes'' rather than just maintaining lexical or topological
hygiene.
\end{remark}